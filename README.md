# TestOtpuskUA - Тестове завдання

Тестовий проект для пошуку турів. Реалізовано форму пошуку з автодоповненням, відображення результатів пошуку та детальну сторінку туру. Readme більше створено для перевірки проекту і намагаюсь виписати сюди максимально потрібні відповіді... Якщо що не так в оформленні Ви завжди можете звернутись до мене і я зроблю все під ваше прохання! Дякую! Гарного перегляду!

## Demo

https://webfsi.github.io/testOtpusk

## Технології

- React
- TypeScript
- Vite
- React Router
- SCSS/Sass (BEM методологія)

## Встановлення

```bash
npm install
```

## Запуск

```bash
npm run dev
```

## Білд

```bash
npm run build
```

## Лінт

```bash
npm run lint
```

## Гілки проекту

| Гілка                                      | Завдання                                    |
| ------------------------------------------ | ------------------------------------------- |
| `main`                                     | Продакшен вітка головна                     |
| `default`                                  | Базовий шаблон проекту для нових розробок   |
| `dev`                                      | Робоча гілка для розробників                |
| `task-1-tour-search-form`                  | Завдання 1: Форма пошуку турів              |
| `task-2-search-tours`                      | Завдання 2: Пошук турів (API, retry)        |
| `task-3-render-search-results`             | Завдання 3: Рендер результатів пошуку       |
| `task-4-page-tour`                         | Завдання 4: Сторінка туру                   |
| `task-5-changing-parameters-during-search` | Завдання 5: Скасування та перезапуск пошуку |
| `refactor/final-cleanup`                   | Фінальне очищення коду                      |

## Структура проекту

```
src/
├── api/                    # API модуль
│   ├── api.js             # Оригінальний mock API (не редагується)
│   ├── mainApi.js         # Копія для експериментів
│   └── index.ts           # Експорти API функцій
│
├── components/
│   ├── icons/             # SVG іконки як React компоненти
│   │   ├── CalendarIcon.tsx
│   │   ├── CityIcon.tsx
│   │   ├── CountryIcon.tsx
│   │   └── ...
│   │
│   └── ui/                # UI компоненти
│       ├── Button/        # Універсальна Кнопка (підтримує Link)
│       ├── Dropdown/      # Випадаючий список з пошуком
│       ├── IconText/      # Іконка + текст
│       ├── Input/         # Поле вводу
│       ├── Loader/        # Індикатор завантаження
│       ├── Message/       # Повідомлення (error/warning/info/success)
│       └── TourCard/      # Картка туру (default/detailed варіанти)
│
├── context/               # React Context
│   └── SearchContext.tsx  # Контекст пошуку (prices, hotels, стан)
│
├── features/              # Фічі (складні компоненти з логікою)
│   ├── SearchForm/        # Форма пошуку з автодоповненням
│   └── SearchResults/     # Результати пошуку (грід карток)
│
├── hooks/                 # Кастомні хуки
│   ├── useSearchPrices.ts # Пошук цін (retry, кешування, скасування)
│   ├── useHotels.ts       # Завантаження готелів
│   └── useTourData.ts     # Дані для сторінки туру
│
├── mocks/                 # Моки для UI Kit та констант
│   ├── countries.mock.ts  # Моки країн для Dropdown
│   └── services.mock.ts   # Іконки та назви послуг готелів
│
├── pages/                 # Сторінки
│   ├── Home/              # Головна (пошук + результати)
│   ├── Tour/              # Детальна сторінка туру
│   └── UIKit/             # UI Kit для демонстрації компонентів
│
├── styles/                # Глобальні стилі
│   ├── global.scss        # Глобальні стилі
│   ├── variables.scss     # SCSS змінні (кольори, відступи, шрифти)
│   └── mixins.scss        # SCSS міксіни
│
├── types/                 # TypeScript типи
│   ├── country.type.ts
│   ├── hotel.type.ts
│   ├── price.type.ts
│   └── ...
│
├── utils/                 # Утиліти
│   ├── formatDate.ts      # Форматування дати
│   ├── formatPrice.ts     # Форматування ціни
│   └── formatCurrency.ts  # Форматування валюти
│
├── App.tsx                # Головний компонент з роутингом
└── main.tsx               # Точка входу
```

## Прийняті рішення

### Стилізація

- **SCSS/Sass** - як вказано у вакансії, жодних бібліотек, своі напрацьовані лиш міксіни мінімальні і перемінні, піксельний стандартний підхід...
- **BEM методологія** - без CSS модулів, класичний підхід, максимально просто, без бібліотек
- **CamelCase** - для назв файлів і папок компонентів, можно було б кебаб кейсом - але прийнятий такий метод бо він так вважаю більш популярніший, можно було додавати до назв суфікси по типу "name.compontent.ts" але вирішив пропустити бо не зрозуміло як до цього рішення буде відношення...
- **Без UI бібліотек** - всі компоненти написані з нуля (без MUI, Bootstrap тощо)

### Архітектура

- **Розділення логіки від UI** - бізнес-логіка в хуках, UI в компонентах
- **React Context** - для глобального стану пошуку, редакс був не підключений тому вирішив максимально просто
- **Типізація** - повна типізація через TypeScript
- **Декомпозиція** - дрібні перевикористовувані компоненти

### API

Файл `src/api/api.js` - mock API, який **не редагується** згідно ТЗ.

**Особливість:** `getPrice(priceId)` генерує нову випадкову ціну при кожному виклику. Тому ціна на детальній сторінці туру може відрізнятись від ціни в списку - це очікувана поведінка mock API.

Файл `src/api/mainApi.js` - копія оригінального API, створена для виправлень апі від тз - щоб перевіряти те чи інше. Залишена в проекті, але не використовується.

### Пошук з retry та скасуванням

- **Retry механізм** - при помилці 425 (Too Early) очікування до `waitUntil`
- **Кешування** - результати пошуку кешуються по countryId
- **Скасування** - при новому пошуку попередній скасовується через `stopSearchPrices`

## Компоненти

### Button

Універсальна кнопка з підтримкою `<Link>` для навігації.

```tsx
<Button variant="primary" size="md">Текст</Button>
<Button to="/page" variant="secondary">Посилання</Button>
```

### Dropdown

Випадаючий список з пошуком, підтримкою іконок та зображень.

```tsx
<Dropdown
  value={value}
  onChange={setValue}
  onSelect={handleSelect}
  items={items}
  placeholder="Пошук..."
/>
```

### TourCard

Картка туру з двома варіантами відображення.

```tsx
<TourCard variant="default" {...props} />
<TourCard variant="detailed" {...props} />
```

### SearchForm

Форма пошуку з автодоповненням через API.

### SearchResults

Грід результатів пошуку з картками турів.

## Сторінки

- `/` - Головна сторінка з пошуком
- `/tour/:priceId/:hotelId` - Детальна сторінка туру. підхід через індитифікатори які вказані по тз
- `/ui-kit` - UI Kit для демонстрації компонентів. Сторінку для продакшену поки не видалено, поки залишено...

## Особливості

- Навігація через `react-router-dom` без перезавантаження сторінки
- Збереження результатів пошуку при переході на сторінку туру
- Клавіатурна навігація в Dropdown (стрілки, Enter, Escape)
- "Респонсив" верстка, мінімум медіазапитів
